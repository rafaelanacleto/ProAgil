<div class="container">
  <div class="row">
    <form action="">
      <div class="form-inline">
        <input type="text"
                [(ngModel)]="filtroLista"
                name="filtroList"
                (ngModelChange)="filtroLista = $event"
                class="form-control mr-2"
                placeholder="buscar">
        <h5>Filtro: {{filtroLista}}</h5>
      </div>
    </form>
  </div>
  <br>
  <div class="row">    
    <table class="table table-dark">
      <thead>
        <tr>
          <th scope="col">
            <button class="btn btn-outline-warning btn-sm" (click) = "alternarImagem()">
              <i class="{{mostrarImagem ? 'fa fa-eye-slash' : 'fa fa-eye'}}"></i>                
            </button>
          </th>
          <th scope="col">#</th>
          <th scope="col">Tema</th>
          <th scope="col">Local</th>
          <th scope="col">Data</th>
          <th scope="col">QTD Pessoas</th>
          <th scope="col">Lote</th>
          <th scope="col">Opções</th>
        </tr>
      </thead>
      <tbody *ngIf = "eventos && eventos.length">
        <tr *ngFor="let evento of eventosFiltrados">
          <td>
              <img *ngIf="mostrarImagem" src="http://localhost:5000/img/{{evento.imagemUrl}}" style="width: 60px; height: 35px;">
          </td>
          <td>{{evento.id}}</td>
          <td>{{evento.tema}}</td>
          <td>{{evento.local}}</td>
          <td>{{evento.dataEvento}}</td>
          <td>{{evento.qtdPessoas}}</td>
          <td>
            <div *ngIf = "!evento.lotes.length">
                não informado!
            </div>      
            <div *ngIf = "evento.lotes.length">
              {{evento.lotes[0].nome | uppercase}}
          </div>       
          </td>
          <td>
            <button class="btn btn-sm btn-primary" tooltip="Editar" (click)="openModal(template)">
              <i class="fa fa-edit"></i>
            </button>
            <button class="btn btn-sm btn-warning" tooltip="Apagar">
              <i class="fa fa-eraser"></i>
            </button>
          </td>
        </tr>
      </tbody>
      <tfoot>
        <tr>
          <td>
             <h6>Quantidade de registros:  {{eventos.length}}</h6>
          </td>
        </tr>
      </tfoot>
    </table>
  </div>
  <div class="row">
    <ng-template #template>
      <div class="modal-header">
        <h4 class="modal-title pull-left">Modal</h4>
        <button type="button" class="close pull-right" 
        aria-label="Close" (click)="modalRef.hide()">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      This is a modal.
    </div>
    </ng-template>
  </div>
  <div class="row">
    <form [formGroup]="registerForm">
      <div class="form-row">
        <div class="form-group col-md-12">
          <label>Tema</label>
          <input type="text" class="form-control" formControlName="tema">
        </div>
      </div>  
      <div class="form-row">
        <div class="form-group col-md-8">
          <label>Local</label>
          <input type="text" class="form-control" formControlName="local">
        </div>
        <div class="form-group col-md-4">
          <label>Data e Hora</label>
          <input type="text" class="form-control" formControlName="dataEvento">
        </div>
      </div>  
      <div class="form-row">
        <div class="form-group col-md-3">
          <label>Qtd Pessoas</label>
          <input type="text" class="form-control" formControlName="qtdPessoas">
        </div>
        <div class="form-group col-md-9">
          <label>Imagem</label>
          <input type="text" class="form-control" formControlName="imagemUrl">
        </div>
      </div>  
      <div class="form-row">
        <div class="form-group col-md-4">
          <label>Telefone</label>
          <input type="text" class="form-control" formControlName="telefone">
        </div>
        <div class="form-group col-md-8">
          <label>Email</label>
          <input type="text" class="form-control" formControlName="email">
        </div>
      </div> 
    </form>
    <br>
    <button class="btn btn-secondary" (click)="openModal(template)">
      Fechar
    </button>
    <button class="btn btn-primary" (click)="salvarAlteracao()">
      Salvar Alterações
    </button>
    <br>
    <br>
  </div>
</div>


